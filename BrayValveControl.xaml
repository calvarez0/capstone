<UserControl x:Class="WPF_GUI.BrayValveControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             Width="80" Height="110">
    <UserControl.Resources>
        <!-- Blinking animation: 1 second no color, 1 second with color -->
        <Storyboard x:Key="BlinkAnimation" RepeatBehavior="Forever">
            <!-- Top Rectangle Fill -->
            <ColorAnimationUsingKeyFrames Storyboard.TargetName="TopRectangleFill"
                                         Storyboard.TargetProperty="Color"
                                         Duration="0:0:2">
                <DiscreteColorKeyFrame KeyTime="0:0:0" Value="Transparent"/>
                <DiscreteColorKeyFrame KeyTime="0:0:1" Value="{Binding StatusColor, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
            </ColorAnimationUsingKeyFrames>
            <!-- Circle Fill -->
            <ColorAnimationUsingKeyFrames Storyboard.TargetName="CircleFill"
                                         Storyboard.TargetProperty="Color"
                                         Duration="0:0:2">
                <DiscreteColorKeyFrame KeyTime="0:0:0" Value="Transparent"/>
                <DiscreteColorKeyFrame KeyTime="0:0:1" Value="{Binding StatusColor, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
            </ColorAnimationUsingKeyFrames>
            <!-- Connector Fill -->
            <ColorAnimationUsingKeyFrames Storyboard.TargetName="ConnectorFill"
                                         Storyboard.TargetProperty="Color"
                                         Duration="0:0:2">
                <DiscreteColorKeyFrame KeyTime="0:0:0" Value="Transparent"/>
                <DiscreteColorKeyFrame KeyTime="0:0:1" Value="{Binding StatusColor, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
            </ColorAnimationUsingKeyFrames>
        </Storyboard>
    </UserControl.Resources>

    <Grid>
        <StackPanel HorizontalAlignment="Center">
            <!-- Valve Icon Silhouette -->
            <Grid Width="80" Height="70">
                <!-- Top Rectangle -->
                <Rectangle Width="80" Height="25"
                          VerticalAlignment="Top"
                          HorizontalAlignment="Center">
                    <Rectangle.Fill>
                        <SolidColorBrush x:Name="TopRectangleFill" Color="Green"/>
                    </Rectangle.Fill>
                </Rectangle>

                <!-- Connector/Stem -->
                <Rectangle Width="20" Height="10"
                          VerticalAlignment="Top"
                          HorizontalAlignment="Center"
                          Margin="0,25,0,0">
                    <Rectangle.Fill>
                        <SolidColorBrush x:Name="ConnectorFill" Color="Green"/>
                    </Rectangle.Fill>
                </Rectangle>

                <!-- Bottom Circle -->
                <Ellipse Width="60" Height="60"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Center">
                    <Ellipse.Fill>
                        <SolidColorBrush x:Name="CircleFill" Color="Green"/>
                    </Ellipse.Fill>
                </Ellipse>

                <!-- Position Text on Circle -->
                <TextBlock x:Name="PositionText"
                          Text="100%"
                          FontSize="14"
                          FontWeight="Bold"
                          Foreground="White"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Bottom"
                          Margin="0,0,0,18">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="3" Opacity="0.5" ShadowDepth="1"/>
                    </TextBlock.Effect>
                </TextBlock>
            </Grid>

            <!-- Address Box Below Icon -->
            <Border x:Name="AddressBox"
                   Background="#ADD8E6"
                   BorderBrush="#2c3e50"
                   BorderThickness="2"
                   CornerRadius="4"
                   Padding="15,5"
                   Margin="0,5,0,0">
                <TextBlock x:Name="AddressText"
                          Text="1"
                          FontSize="14"
                          FontWeight="Bold"
                          Foreground="#2c3e50"
                          HorizontalAlignment="Center"/>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>
